<% provide(:title, @user.name) %>

<div class="container">
  <div class="user_info">
    <% if @user.picture? %>
      <%= image_tag @user.picture.url, class: "profile-icon" %>
    <% else %>
      <%= image_tag 'default_icon.png', class: "profile-icon" %>
    <% end %>
    
    <div class="user-name"><%= @user.name %></div>

    <%= render 'edit_btn' %>
  </div>
</div>

<h2>投稿一覧</h2>

<% unless @user.articles.present? %>
  <h3>投稿記事はありません</h3>
<% end %>

<div class="grid">
  <% @user.articles.each do |article| %>
    <div class="article-item">
      <p class="title"><%= link_to article.title, article %></p>
      <p class="option">
        <%= "投稿日：#{article.created_at.to_s(:datetime)}" %>
        <% if logged_in? %>
          <% if current_user.admin? || is_mine?(article)  %>
            <%= link_to "編集", edit_article_path(article) %>
            <%= link_to "削除", article_path(article), method: :delete, data: {confirm: "記事を削除します。よろしいですか？"} %>
          <% end %>
        <% end %>  
      </p>
    </div>
  <% end %>
</div>

<div class="container">
  <%= render 'delete_btn' %>
</div>